# コスト見積もりサマリー

## 1. 概要

Scalar Auditor for BOXのマイクロサービス化に伴うインフラストラクチャ・ライセンス・運用コストの見積もりです。

**為替レート**: 1 USD = 150 JPY（参考値）

---

## 2. インフラストラクチャコスト（月額）

### 2.1 AWS環境 推定コスト

| カテゴリ | コンポーネント | スペック | 数量 | 月額 (USD) | 月額 (JPY) |
|---------|--------------|---------|------|-----------|-----------|
| **Kubernetes** | EKS Cluster | - | 1 | $73 | ¥10,950 |
| **Compute** | EC2 (Worker Nodes) | m5.xlarge | 6 | $864 | ¥129,600 |
| **Database** | Amazon Keyspaces | On-demand | - | $500 | ¥75,000 |
| **Cache** | ElastiCache Redis | r6g.large | 3 | $324 | ¥48,600 |
| **Load Balancer** | ALB | - | 2 | $40 | ¥6,000 |
| **Storage** | EBS (gp3) | 500GB | 6 | $120 | ¥18,000 |
| **Monitoring** | CloudWatch | - | - | $100 | ¥15,000 |
| **Network** | Data Transfer | 500GB/月 | - | $45 | ¥6,750 |
| | | | **合計** | **$2,066** | **¥309,900** |

### 2.2 環境別コスト

| 環境 | 規模 | 月額 (USD) | 月額 (JPY) | 備考 |
|------|------|-----------|-----------|------|
| 開発 | 最小 | $300 | ¥45,000 | 1ノード、最小スペック |
| ステージング | 中 | $800 | ¥120,000 | 2ノード |
| 本番 | フル | $2,066 | ¥309,900 | 上記構成 |
| DR | 最小 | $500 | ¥75,000 | 待機系 |
| **合計** | | **$3,666** | **¥549,900** | |

---

## 3. ライセンスコスト（年額）

### 3.1 Scalar製品

| 製品 | ライセンス形態 | 年額 (USD) | 年額 (JPY) | 備考 |
|------|--------------|-----------|-----------|------|
| ScalarDB Enterprise | 商用ライセンス | $50,000 | ¥7,500,000 | 本番環境用 |
| ScalarDL | 商用ライセンス | $30,000 | ¥4,500,000 | 改ざん検知 |
| サポート | プレミアム | $15,000 | ¥2,250,000 | 24/7サポート |
| **合計** | | **$95,000** | **¥14,250,000** | |

### 3.2 その他ライセンス

| 製品 | 用途 | 年額 (USD) | 年額 (JPY) |
|------|------|-----------|-----------|
| BOX Platform | API連携 | 含まれる | - |
| Kong Enterprise（オプション） | API Gateway | $25,000 | ¥3,750,000 |
| Datadog（オプション） | APM/監視 | $18,000 | ¥2,700,000 |

---

## 4. 開発・移行コスト

### 4.1 開発工数見積もり

| フェーズ | 作業内容 | 工数 (人月) | 単価 (万円) | 費用 (万円) |
|---------|---------|-----------|-----------|-----------|
| Phase 1 | UserService分解 | 3 | 150 | 450 |
| Phase 2 | サービス間結合解消 | 2 | 150 | 300 |
| Phase 3 | サービス統合 | 1.5 | 150 | 225 |
| Phase 4 | フロントエンド改善 | 2 | 150 | 300 |
| Phase 5 | インフラ構築 | 2 | 150 | 300 |
| Phase 6 | テスト・検証 | 2 | 150 | 300 |
| Phase 7 | 移行・並行運用 | 1.5 | 150 | 225 |
| **合計** | | **14人月** | | **2,100万円** |

### 4.2 移行コスト

| 項目 | 費用 (万円) |
|------|-----------|
| データ移行ツール開発 | 100 |
| 並行運用期間（3ヶ月） | 150 |
| 切り替えサポート | 50 |
| **合計** | **300万円** |

---

## 5. 運用コスト（月額）

| 項目 | 内容 | 月額 (万円) |
|------|------|-----------|
| インフラ監視 | 24/7監視、アラート対応 | 30 |
| アプリケーション保守 | バグ修正、軽微な改善 | 50 |
| セキュリティ運用 | 脆弱性対応、パッチ適用 | 20 |
| バックアップ・DR | バックアップ確認、DR訓練 | 10 |
| **合計** | | **110万円/月** |

---

## 6. 総コスト試算

### 6.1 初年度

| カテゴリ | 費用 (万円) |
|---------|-----------|
| 開発・移行 | 2,400 |
| インフラ（年額） | 660 |
| ライセンス（年額） | 1,425 |
| 運用（年額） | 1,320 |
| **初年度合計** | **5,805万円** |

### 6.2 2年目以降（年額）

| カテゴリ | 費用 (万円) |
|---------|-----------|
| インフラ | 660 |
| ライセンス | 1,425 |
| 運用 | 1,320 |
| **年間合計** | **3,405万円** |

---

## 7. ROI分析

### 7.1 期待効果

| 効果 | 現状 | 移行後 | 年間削減額 |
|------|------|--------|-----------|
| 開発生産性 | 100% | 150% | 500万円 |
| 障害復旧時間 | 4時間 | 30分 | 100万円 |
| スケーリング工数 | 2週間 | 1時間 | 200万円 |
| 技術的負債解消 | - | - | 300万円 |
| **年間効果合計** | | | **1,100万円** |

### 7.2 投資回収期間

```
初期投資: 2,400万円
年間追加コスト: 3,405 - 2,500（現状コスト） = 905万円
年間効果: 1,100万円
純効果: 1,100 - 905 = 195万円/年

投資回収期間 = 2,400 / 195 ≒ 12.3年
```

**注記**: 上記は保守的な試算。実際には以下の定量化困難な効果も期待:
- 機能追加速度の向上
- エンジニア採用の容易化
- セキュリティリスク低減

---

## 8. コスト最適化オプション

| オプション | 削減額/年 | トレードオフ |
|-----------|-----------|-------------|
| Reserved Instances | -$500 | 1-3年コミット必要 |
| Spot Instances（開発環境） | -$200 | 可用性低下 |
| OSS監視ツール採用 | -$18,000 | 運用工数増加 |
| ScalarDB Community Edition | -$50,000 | サポートなし、機能制限 |
